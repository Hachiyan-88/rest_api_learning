<!-- markdownlint-disable MD033 -->
# HTTPメソッド詳解（RESTで一番大事かも）

このページでは、
**REST APIを設計・実装するう上で最重要なHTTPメソッド**について、
初学者向けに簡単に整理する。

この部分が曖昧だと、API設計の部分でモヤモヤが続くかも・・

逆にここが腹落ちすると、「なぜこのAPIはこうなっているのか」が見えてくるようになる。

---

## まず一言でいうと

HTTPメソッドとは：
>**「そのURLに対して、何をしたいか」を表す言葉になる。**

URLが「モノ（リソース）」で、HTTPメソッドが「動作」。

この役割分担がRESTの基本になる。

---

## RESTではURLに動詞を書かない

---

<div class="note-box">
💡 REST設計の基本ルール：<br>
URL＝名詞（リソース）<br>
HTTPメソッド＝動詞（操作）<br>
<br>
この分担だけ覚えておけばOKです。
</div>

---

RESTでは、
>**URLは名詞、動詞はHTTPメソッド**
という考え方をしよう。

---

❌ よくある例

```JSON
/getUser?id=1
```

⭕ RESTっぽい例

```JSON
GET /users/1
```

- /users/1→モノ
- GET→取得する

意味が自然に読めるのがRESTです。

---

## GET（取得）

### 何をするメソッドなの？

>**リソースを取得するだけ**

- データを見る
- 一覧を表示する

---

例：

```JSON
GET /users
```

→ユーザー一覧を取得する。

```JSON
GET /users/1
```

→ユーザーID⁼1を取得する。

---

<div class="warning-box">
<strong>注意</strong><br>
⚠ GETは「取得専用」です。<br>
データ更新処理をGETで行うと、キャッシュや再読み込みにより意図せず更新される危険があります。
</div>

---

### GETの重要ルール

- **データを変更意思ない**
- 何度呼んでも結果は同じになる

👉 「見る専用」です。

---

## POST（作成）

### 何をするメソッド？

>**新しいリソースを作成する**

---

例：

```JSON
POST /users
```

リクエストボディ：

```JSON
{
    "name":"Taro"
}
```

→新しいユーザーを作る

---

### POSTの特徴

- サーバー側でIDを決定する
- 呼ぶたびに結果が変わる可能性がある

👉 だからPOSTは冪等ではない

---

## PUT（更新・置き換え）

### 何するメソッド？

>**指定したリソースを丸ごと更新する**

---

例：

```JSON
PUT /users/1

{
    "name":"Hanako"
}
```

→ユーザー1をこの内容で上書きする。

---

### PUTのポイント

- URLで対象を指定する
- 同じリクエストを何度も送っても、結果は同じになる。

👉 PUTは冪等です

---

## PATCH（部分更新）

### 何するをメソッド？

>リソースの一部分だけを更新する。

---

例：

```JSON
PATCH /users/1

{
    "age":30
}
```

→年齢だけ更新する

---

### PUTとの違い

- PUT：全部置き換える
- PATCH：一部のみ変更

現場ではPATCHが使われがちのよう。

---

## DELETE（削除）

### 何するメソッドなの？

>**リソースを削除する**

---
例：

```JSON
DELETE /users/1
```

→ユーザー1を削除する。

---

### DELETEの特徴

- 基本的に冪等。
- 既に消えていても結果は同じになる。

---

## 冪等性（べきとうせい）とは？

最大の壁ワードかも・・・

### 一言でいうと

>同じ操作を何回やっても、結果が変わらない性質である。

---

例：電気のスイッチ

- ONにする→何回押してもON
- OFFにする→何回押してもOFFの状況

これが冪等の意味になる。

---

## **各メソッドの冪等性**

| **メソッド** | **冪等？** |
| GET | 〇 |
| POST | × |
| PUT | 〇 |
| PATCH | △ |
| DELETE | 〇 |

---

## なぜ冪等性が必要なの？

- 通信エラーで再送される。
- 同一リクエストが2回くるようになる。

この時、

- POSTだと二重登録する
- PUTだと安全である

👉 システムを壊さない設計につながる

---

## HTTPメソッド（図で解説）

```sql
GET     → 取得
POST    → 作成
PUT     → 更新
DELETE  → 削除
```

または：

```sql
        データ
          │
 ┌──────────────┐
 GET     取り出す
 POST    追加
 PUT     上書き
 DELETE  削除
 └──────────────┘
```

CRUDの視覚的な理解が楽になるかも。

---

## よくある間違いの例

- GETでデータを更新する。
- POSTで更新処理を行う。
- URLに動詞を入れる。

例：

```JSON
POST /updateUser
```

RESTには微妙な感じ

---

## 今の自分の学習メモ

- POSTとPUTは最初かなり混乱していた。
- 「IDを誰が決めるか」で考えるとわかりやすくなるかも。
- 冪等性は安全設計の話

---

## まとめ

- URLはリソース（名詞）
- HTTP、メソッドが操作（動詞）
- POSTとPUTの違いはとても重要になる。
- 冪等性を意識すると事故が減るようになる。

ここを抑えると、REST API設計の基礎体力がつく。

---

👈 前へ → :[02_HTTP基礎](02_httpの基礎.html)

👉 次へ → :[04_ステートレスとは](04_ステートレスとは.html)

---

👈 TOPへ → :[TOPページ](index.html)
