<!-- markdownlint-disable MD033 -->
# ステートレスとは何か（RESTの核心部分らしい）

このページでは、
**RESTの特徴として必ず出てくる「ステートレス」**について、
初学者の自分に向けて分かりやすく整理する。

言葉が難しいだけで、考え方はそこまで複雑じゃない。

---

## まず一言でいうと

ステートレスとは：
>**サーバーがクライアントの「状態」を覚えない設計**

RESTでは、過去のやり取りに依存しないことが重要になるらしい！

---

## そもそも「ステート（状態）」って何？

ステートとは：
>**今どんな状況か、どこまで進んでいけるかという状態**

```markdown
× ステートフル
サーバー「前の注文おぼえてるよー」

〇 ステートレス
毎回「ラーメンください」
```

または：

```markdown
リクエスト① → 独立
リクエスト② → 独立
リクエスト③ → 独立
```

---

### 例え：電話とチャット

#### 電話（ステートフル）

- 会話の流れを覚えている
- 「さっきの話だけど・・・」が通じる

👉 前後関係が大事

---

#### チャット（ステートレス寄り）

- 1メッセージ毎に完結する
- 過去の文脈に依存しない

👉 毎回必要な情報を書く必要がある

RESTはこの「チャット寄り」の考え方です。

---

<div class="warning-box">
<strong>注意</strong><br>
⚠ RESTが「完全に文脈を無視する」という意味ではありません。<br>
必要な情報を毎回送ることで、文脈に依存しない設計にしています。
</div>

---

## ステートフルな設計だと何が起きる？

サーバーが状態を持つと、

- どのユーザーが
- 今どの段階か

を覚え続ける必要がある。

---

## 問題点

- サーバーの負担が増加する
- 台数を増やしにくい
- 再起動で状態が消える

👉 スケールしづらい

---

## なぜRESTはステートレスを選んだのか

理由は主に3つ。

---

### ①シンプルになる

- サーバーはリクエストだけ見れればいい
- 前後関係を気にする必要がなくなる

👉 つまり、実装が分かりやすい。

---

### ②スケールしやすい

- どのサーバーが受けてもOK
- ロードバランサとの相性◎

👉 ロードバランサを使うような大規模サービスに向いている

---

### ③障害に強い

- 途中でサーバーが落ちても影響が小さい

👉 復旧しやすいことが良いところ

---

## 「ログインしているのに覚えているのはなんで？」問題

ここが一番混乱する部分かも。

RESTはステートレスなのに、

- ログイン状態が維持されている
- ユーザーが判断できる

なんで？

---

## 答え：状態はクライアント側が持っている

RESTでは、
>**状態はクライアントが毎回送る**

---

## 具体例

- セッションID
- トークン（JWTなど）

これにリクエストを含めて送る。

---

## イメージ

> クライアント→「私は◯◯です。この操作をしたい」  
> サーバー → 「OK、処理する」

毎回この形。

---

## セッションとトークン（超ざっくり）

### セッション

- 状態はサーバー側にある。
- クライアントはIDだけ持つ。

👉 ややステートフル目

---

### トークン（JWTなど）

- 状態をトークンに含める
- サーバーは検証するだけ

👉 セッションよりもステートレス

※詳細は後程違うページで深堀りする予定。

---

## ステートレスの注意点

- 毎回情報を送る必要がある。
- リクエストが少し重たくなっちゃう。

それを踏まえても、得られるメリットの方が大きい！

---

## よくある勘違い

- ステートレス＝ログイン不可
- 状態を一切持ってはいけない
- セッションはREST違反

👉 現実はもっと柔軟。

---

## 自分用メモ

- 「覚えない」のはサーバー側
- 状態はリクエストに含める
- 最初は矛盾しているように感じた

---

## まとめ

- ステート＝状態
- RESTはステートレスを重視している
- 状態はクライアントが毎回送る
- スケールしやすさが最大の理由らしい

この考え方が、認証・認可・API設計につながっていくようだ。

---

👈 前へ → :[03_HTTPメソッド詳解](03_httpメソッド詳解.html)

👉 次へ → :[05_JSONの基礎](05_jsonの基礎.html)

---

👈 TOPへ → :[TOPページ](index.html)
